<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-guides docs-doc-id-Network nodes/fleek-network-securing-a-node-with-ssl-tls">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Securing a node with SSL/TLS | Fleek Network Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.fleek.network/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-guides-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-guides-current"><meta data-rh="true" property="og:title" content="Securing a node with SSL/TLS | Fleek Network Docs"><meta data-rh="true" name="description" content="We&#x27;ll look into how to secure a Fleek Node with TLS certificates provided by Let&#x27;s Encrypt, the nonprofit Certificate Authority (CA) used in the Docker stack"><meta data-rh="true" property="og:description" content="We&#x27;ll look into how to secure a Fleek Node with TLS certificates provided by Let&#x27;s Encrypt, the nonprofit Certificate Authority (CA) used in the Docker stack"><meta data-rh="true" property="og:image" content="https://docs.fleek.network/assets/images/fleek-network-how-to-secure-a-network-node-599a0a1a50d6419c6203571bc1110bc5.png"><meta data-rh="true" name="twitter:image" content="https://docs.fleek.network/assets/images/fleek-network-how-to-secure-a-network-node-599a0a1a50d6419c6203571bc1110bc5.png"><link data-rh="true" rel="icon" href="/img/favicon.ico?202301091316"><link data-rh="true" rel="canonical" href="https://docs.fleek.network/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls"><link data-rh="true" rel="alternate" href="https://docs.fleek.network/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.fleek.network/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZLPPXSKTFE-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fleek Network Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fleek Network Docs Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Fleek Network Docs JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPHQQEZ1SP"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GPHQQEZ1SP",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Fleek Network Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7a35f634.css">
<link rel="preload" href="/assets/js/runtime~main.8a0983d7.js" as="script">
<link rel="preload" href="/assets/js/main.f0e9a9e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png?2023091241" alt="Fleek" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png?2023091241" alt="Fleek" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/blog">Engineering</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides">Guides</a><a class="navbar__item navbar__link" href="/reference">Reference</a></div><div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides">Introducing guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/guides/Network nodes/fleek-network-getting-started-guide">Network nodes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-getting-started-guide">Getting Started Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-how-to-get-the-latest-updates-for-ursa-cli-from-the-source-repository">How to get the latest updates for Ursa CLI from the source repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/how-to-install-a-node-easily-with-the-assisted-installer">How to install a node easily with the assisted installer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-how-to-install-rust-and-the-dependencies-for-ursa-cli">How to install Rust and the dependencies for Ursa CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-managing-the-key-store">Fleek Network: Managing the key store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-node-health-check-guide">Node Health Check guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-packing-content-addressed-data">How to deal with files using Content Addressable aRchives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls">Securing a node with SSL/TLS</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p><img loading="lazy" src="/assets/images/fleek-network-how-to-secure-a-network-node-599a0a1a50d6419c6203571bc1110bc5.png" width="2400" height="1256" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Secure Sockets Layer or Transport Layer Security are the technologies used to keep an internet connection secure by protecting sensitive data that is transferred between systems. It&#x27;s a protocol for servers and web clients to ensure that data passed between them is private!</p><p>A secure connection is required to prevent others from modifying, reading or tampering with the data that is transmitted. Otherwise, it can be intercepted by third parties, such as hackers.
HTTP connections are insecure by default. SSL, or TLS (the modern version of SSL), uses advanced encryption algorithms in transit, keeping the data transferred over the connection private.</p><p>You&#x27;ve likely noticed <code>HTTPS://</code> when surfing the web, and more specifically when making payments or dealing with sensitive data! This is used to secure and encrypt the connection.</p><p>Nonetheless, accessing a service via <code>HTTPS://</code> does not make it secure, as the SSL/TLS requires a valid certificate that is processed by a <a href="https://en.wikipedia.org/wiki/Certificate_authority" target="_blank" rel="noopener noreferrer">Certificate Authority (CA)</a>. Historically, SSL/TLS Certificates are usually purchased from a retailer that acts as a Certificate Authority (CA), known to be costly and especially when setting up multiple web services!</p><p>In recent years, the non-profit organization <a href="https://en.wikipedia.org/wiki/Let&#x27;s_Encrypt" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a> started providing TLS certificate encryption, that is free of charge. The Let&#x27;s Encrypt organization also improved the administration experience by providing automation features for system administrator processes.</p><p>In that respect, we&#x27;ll look into how to secure a Fleek Node with TLS certificates provided by Let&#x27;s Encrypt, by harnessing the knowledge provided in our <a href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a> guide. We&#x27;ll look into how to set up our custom domain in the Nginx configuration, generate dummy certificates, and finally real certificates to understand how the certificate automation is handled to mitigate issues, such as expiration.</p><p>The knowledge demonstrated here should be useful and can be easily applied to native setups (not Docker). As some troubleshooting and differences are found in different systems, we&#x27;ll stick with our Docker Stack for that matter and simplicity!</p><p>If you have any feedback or questions join <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">our community Discord</a> channel!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">​</a></h2><p>To follow the guide, you will need the following:</p><ul><li><p>Familiarity with the command-line interface </p></li><li><p>Ability to run the Docker Stack successfully as instructed in our <a href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a> or <a href="https://www.youtube.com/watch?v=uAFIDu3UBvw" target="_blank" rel="noopener noreferrer">video guide</a></p></li><li><p>Have a domain name and DNS setup management permissions (ideally if you want to persist a domain for a long time, we&#x27;ll provide you with a free alternative that is dynamic and only suitable for the demo)</p><blockquote><p>🤖 As Fleek Network&#x27;s repositories are in constant development and change, you should consider that the following guide was <a href="https://git-scm.com/docs/git-checkout" target="_blank" rel="noopener noreferrer">checked in</a> to commit <code>676b01d</code>. While we try our best to update documentation and guides during development, there might be breaking changes that might take some time to reflect in our docs. To avoid disappointment, feel free to check into commit <code>676b01d</code> or contribute by getting in touch with us, or sending a PR in the relevant context. Learn how to checkout a commit in our repository history <a href="/reference/Git/how-to-checkout-a-commit-in-project-history">here</a> 🙏.</p></blockquote></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-video">Quick Video<a class="hash-link" href="#quick-video" title="Direct link to heading">​</a></h2><p>A walkthrough video is provided as a quick reference for the users, we try to keep it simple and would suggest the text guide version to get more detailed information. </p><p>The video content is stored in our Fleek Network <a href="https://www.youtube.com/watch?v=uAFIDu3UBvw&amp;list=PL3v9ZaTBrN9GEQ2NmS5xc6YH0E2df5VTn" target="_blank" rel="noopener noreferrer">playlist</a> on the Fleek XYZ <a href="https://www.youtube.com/@fleekxyz" target="_blank" rel="noopener noreferrer">Youtube channel</a>.</p><div class="youtube-player"><iframe src="https://www.youtube.com/embed/LvnIHH5hnr8?controls=1&amp;modestbranding=1&amp;playsinline=1&amp;rel=0" title="Securing a node with SSL/TLS" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-ssltls-certificates">What are SSL/TLS certificates?<a class="hash-link" href="#what-are-ssltls-certificates" title="Direct link to heading">​</a></h2><p>An SSL Certificate is a file that is stored on a web server that represents the content of an encrypted key. A certificate file only contains information that is relevant to authenticate a service. Some of the properties of the file include a key pair (a public and private key that work together to establish an encrypted connection), the issuer of the certificate, and the associated subdomains.</p><p>In practice when a user navigates to a secure service, the user gets a public key, establishes an encrypted connection and has the server identity verified.</p><p>Nowadays, most web clients use TLS (Transport Layer Security) encryption, which is used as SSL (Secure Sockets Layer). Although should be noted that SSL certificates are predecessors of TLS (TLS is an improvement that evolved from SSL), however, the names TLS and SSL remain interchangeable as certificates!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-secure-the-network-node">Why secure the Network Node?<a class="hash-link" href="#why-secure-the-network-node" title="Direct link to heading">​</a></h2><p>Provide a form to authenticate the Network Node server, and without it, the end client that consumes the data is at higher risk of having transmitted data stolen. You want the ability to authenticate your Network Node!</p><p>The secure HTTPS protocol is a norm, while HTTP is obsolete! A Fleek Network Node that is not secure may be punished for bad behavior and thus not be rewarded.</p><p>Since this is a serious web security vulnerability, <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" target="_blank" rel="noopener noreferrer">attackers can place themselves between</a> the users&#x27; client and your Network Node server, and intercept sensitive data in transit.</p><blockquote><p>You want to secure the server for better participation in the network and ensure good behavior, rewards, and global network security.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="domain-name-setup">Domain name setup<a class="hash-link" href="#domain-name-setup" title="Direct link to heading">​</a></h2><p>A domain name is required to follow the instructions, these can be registered by a domain registry provider such as <a href="https://www.opendomainregistry.net/" target="_blank" rel="noopener noreferrer">Open domain registry</a>, <a href="https://www.gandi.net/en-GB" target="_blank" rel="noopener noreferrer">Gandi</a> and many others! Some domain name registrys&#x27; provide SSL certificates as an additional service, but we are going to create TLS certificates on our own, so you won&#x27;t need the domain name registry provider SSL service for this guide!</p><p>💡 SSL without a domain is possible, but we are going to work with domain names to keep this guide simple. If you are looking into securing a public IP Address, you&#x27;ll have to do it on your own or wait for a future guide!</p><p>The domain name DNS records should point to the Network Node server IP address so that when the custom domain is requested, the DNS translates into the server IP address. Our reverse proxy (NGINX) will identify itself with the transport-layer authentication mechanism that includes the SSL certificates.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-set-up-the-dns-settings-for-a-node-server">How to set up the DNS settings for a Node server?<a class="hash-link" href="#how-to-set-up-the-dns-settings-for-a-node-server" title="Direct link to heading">​</a></h3><p>Create or update the <code>A record</code> to point to the server IP Address.</p><p>As an example, let&#x27;s say that we have a domain <code>fleek.xyz</code>, where we set up a subdomain <code>fleek-network-node</code> and that our server IP Address (where the Fleek Network Node is running from) is <code>181.196.118.156</code>.</p><p>The custom domain address would be:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fleek-network-node.fleek.xyz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>💡 Keep a note about the domain name as it&#x27;ll be required for your reverse proxy configuration (NGINX).</p><p>Our server IP Address (this should be public, accessible outside the private network, otherwise external Nodes won&#x27;t be able to communicate):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">181.196.118.156</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Depending on the &quot;domain name registry&quot; dashboard, you&#x27;d have to update the <code>A Records</code>, here&#x27;s an example:</p><table><thead><tr><th>Type</th><th>Host</th><th>Answer</th><th>TTL</th></tr></thead><tbody><tr><td>A</td><td>fleek-network-node.fleek.xyz</td><td>181.196.118.156</td><td>300</td></tr></tbody></table><p>Learn more about record types <a href="https://en.wikipedia.org/wiki/List_of_DNS_record_types" target="_blank" rel="noopener noreferrer">here</a>.</p><p>DNS changes may take some time to propagate, thus make sure to <a href="#how-to-verify-dns-records">verify the DNS records</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternatively-how-can-one-get-a-free-domain-name-for-testing">Alternatively, how can one get a free domain name for testing?<a class="hash-link" href="#alternatively-how-can-one-get-a-free-domain-name-for-testing" title="Direct link to heading">​</a></h3><p>Domain names are costly, you might not have one, or not be interested at this time! For this reason, we&#x27;re going to provide some hints on how to set up a free domain name for your server.</p><p>There are plenty of free domain server providers, but for this guide, we will opt for <a href="https://ngrok.com" target="_blank" rel="noopener noreferrer">Ngrok</a>. There are other alternatives such as <a href="https://localhost.run" target="_blank" rel="noopener noreferrer">Localhost.run</a> or <a href="https://localtunnel.me" target="_blank" rel="noopener noreferrer">LocalTunnel.me</a>, but we&#x27;re keeping things simple here and will not try to provide support for anything else. Using an alternative should be quite similar!</p><blockquote><p>While <code>localhost.run</code> doesn&#x27;t require you to install any apps, it requires exposing port 22 publicly and some users might not be happy about it.</p></blockquote><p>Bear in mind that the domain address provided by this service changes whenever you restart it! Purchasing a domain is better in the long term (which services like Ngrok also provide), as otherwise, you&#x27;d have to modify the configuration every time you restart the server as the domain changes, etc. </p><p>With that in mind, let&#x27;s use <code>Ngrok</code>, as a quick demo only!</p><p>Visit the <a href="https://ngrok.com" target="_blank" rel="noopener noreferrer">Ngrok website</a>, visit the downloads page and follow the instructions to install it on your operating system. Here&#x27;s how we&#x27;d install it for Linux <code>snap</code> package manager users.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">snap install ngrok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or, via Apt</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -s https://ngrok-agent.s3.amazonaws.com/ngrok.asc | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc &gt;/dev/null &amp;&amp; echo &quot;deb https://ngrok-agent.s3.amazonaws.com buster main&quot; | sudo tee /etc/apt/sources.list.d/ngrok.list &amp;&amp; sudo apt update &amp;&amp; sudo apt install ngrok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once installed, you can do a quick check by checking the version:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ngrok --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should get a response</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ngrok version 3.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To create a new domain name via <code>Ngrok</code>, use the following syntax:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ngrok http 80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Ngrok process will generate the following output, where you can find the address created (that is publicly accessible) which maps to the server port <code>80</code>. Our reverse proxy forwards request to port <code>80</code> to our <code>Ursa</code> node. Find more about how the services work in the <a href="/guides/Network nodes/fleek-network-node-health-check-guide">Node Health check guide</a>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Add Okta or Azure to protect your ngrok dashboard with SSO: https://ngrok.com/dashSSO                                                               </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                                                                                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Session Status                online                                                                                                                </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Session Expires               1 hour, 53 minutes                                                                                                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Update                        update available (version 3.1.1, Ctrl-U to update)                                                                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Terms of Service              https://ngrok.com/tos                                                                                                 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Version                       3.1.0                                                                                                                 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Region                        Europe (eu)                                                                                                           </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Latency                       14ms                                                                                                                  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Web Interface                 http://127.0.0.1:4040                                                                                                 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Forwarding                    https://94e7-159-65-87-194.eu.ngrok.io -&gt; http://localhost:80                                                         </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                                                                                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connections                   ttl     opn     rt1     rt5     p50     p90                                                                           </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              0       0       0.00    0.00    0.00    0.00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can conclude that at the time of running, <code>Ngrok</code> generated the following domain:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://94e7-159-65-87-194.eu.ngrok.io </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Be aware that this is useful for a quick demo, by stopping the Ngrok process the domain it generates might differ if you are not a paying customer. We have no affiliation with <code>Ngrok</code> and you are happy to use whichever domain provider of your liking. We are only using <code>Ngrok</code> as a quick example for the users educational interest. If you&#x27;ve been following the guide, should know that the domain name is declared in the reverse proxy configuration file and the Let&#x27;s encrypt initialisation script, meaning you&#x27;d have to update it everytime. In fact, Ngrok forces HTTPS by default, you wouldn&#x27;t have to set up, but in any case we are not knowledgable with the service it provides and the level of security but its useful for quick demos.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-verify-dns-records">How to verify DNS records?<a class="hash-link" href="#how-to-verify-dns-records" title="Direct link to heading">​</a></h3><p>Once you have <a href="#how-to-set-up-the-dns-settings-for-a-node-server">set up the DNS records</a>, verify the records are set correctly, for that you can easily run <code>dig</code> CLI or website like <a href="https://mxtoolbox.com/" target="_blank" rel="noopener noreferrer">mxtoolbox</a>. As an example, we&#x27;re going to use the <code>dig</code> CLI!</p><p><code>Dig</code> (Domain Information Groper) is a network administration command-line tool for querying the Domain Name System (DNS). Read more about it <a href="https://en.wikipedia.org/wiki/Dig_(command)" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dig fleek-network-node.fleek.xyz +nostats +nocomments +nocmd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">;fleek-network-node.fleek.xyz.      IN  A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fleek-network-node.fleek.xyz.       484 IN  A   181.196.118.156</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>👆 The goal is to determine if the DNS record matches the machine IP Address we set up earlier. There might be cases you&#x27;ll need to wait longer, but it&#x27;s good to double-check your DNS record dashboard and revise it if the desired settings fail to show!</p><p>There are many other tools you can use to verify the DNS records, feel free to pick your favorite!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stack-services">Stack Services<a class="hash-link" href="#stack-services" title="Direct link to heading">​</a></h2><p>In our <a href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a> guide, we propose a Stack to run the Network Node that offers you a service for:</p><ul><li>Ursa - The Network Node (Ursa CLI process)</li><li>Nginx - A reverse proxy for Ursa Node service</li><li>Prometheus - A monitoring system for real-time metrics with a web client</li><li>Grafana - Metric visualization for logs, traces, etc.</li></ul><p>This can be fully customized or exchanged for other options for the reverse proxy, monitoring or metric visualization. You are free to pick your tools!</p><p>⚠️ We only provide support for <a href="https://github.com/fleek-network/ursa" target="_blank" rel="noopener noreferrer">Ursa CLI</a>, which we are developing. You&#x27;ll have to visit the official project for more information on how to operate them!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nginx-ssltls-configuration">NGINX SSL/TLS configuration<a class="hash-link" href="#nginx-ssltls-configuration" title="Direct link to heading">​</a></h2><p>Our Nginx reverse proxy has <code>app.conf</code> file where the SSL certificate(s) are, or can be configured. We keep the <code>app.conf</code> pre-configured with an example that you can modify with yours.</p><p>If we recall our <a href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a> and <a href="https://www.youtube.com/watch?v=uAFIDu3UBvw" target="_blank" rel="noopener noreferrer">Video guide</a>, the SSL configuration is omitted to keep things simple, as the configuration requires a domain name, etc. </p><p>⚠️ If you try to run the Node Stack with the example SSL setup, it&#x27;d fail. There aren&#x27;t any valid SSL/TLS certificates, you need valid SSL/TLS certificates to operate HTTPS and secure your reverse server connections! We&#x27;ll look into this briefly in the section <a href="#which-came-first-the-chicken-or-the-egg">Which came first: the chicken or the egg?</a></p><p>We removed the SSL on those guides to keep things simple for you, but it&#x27;s not recommended for production! You are incentivized to operate the Node to the best knowledge and follow security principles for greater rewards and helping to have a healthy and secure network!</p><p>Considering where we left off on the guide, we are going to provide instructions to make it easier for you to get started securing the Node!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="which-came-first-the-chicken-or-the-egg">Which came first: the chicken or the egg?<a class="hash-link" href="#which-came-first-the-chicken-or-the-egg" title="Direct link to heading">​</a></h3><p>We&#x27;d like to start our Stack, but Nginx reverse proxy fails to perform the &quot;Let&#x27;s Encrypt&quot; validation. This causes the reverse proxy to not start because the certificates are not valid. Leading to the &quot;Which came first: the chicken or the egg?&quot; problem!</p><p>We need Nginx to perform the Let’s Encrypt validation somehow! The process that is commonly found if you search online is the following:</p><ul><li>Create a dummy certificate</li><li>Start Nginx</li><li>Delete the dummy certificate</li><li>Request the real certificates</li></ul><p>By happy chance, you don’t have to do all this tedious process manually, as its a known issue you&#x27;ll find scripts (like the <a href="https://github.com/wmnnd/nginx-certbot/blob/master/init-letsencrypt.sh" target="_blank" rel="noopener noreferrer">one</a> we borrowed from) shared by the community that can be very convenient to automate the process for you.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-valid-certificate">Creating a valid certificate<a class="hash-link" href="#creating-a-valid-certificate" title="Direct link to heading">​</a></h3><p>We are going to run the <code>init-letsencrypt.sh</code> script that we have borrowed from <a href="https://github.com/wmnnd/nginx-certbot/blob/master/init-letsencrypt.sh" target="_blank" rel="noopener noreferrer">Philipp
wmnnd Github account</a>.</p><p>You don&#x27;t have to fork it, as we have a <a href="https://github.com/fleek-network/ursa/blob/main/docker/full-node/init-letsencrypt.sh" target="_blank" rel="noopener noreferrer">fork/copy</a> available to you in your local repository. Find it in the path <code>docker/full-node/init-letsencrypt.sh</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-the-lets-encrypt-initialization-script">Preparing the Let&#x27;s Encrypt initialization script<a class="hash-link" href="#preparing-the-lets-encrypt-initialization-script" title="Direct link to heading">​</a></h3><p>Make sure that you have execution writes to execute the script. To set the correct permissions, you can run the following command from the root of your local <code>ursa</code> repository:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod +x docker/full-node/init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Modify the Nginx <code>app.conf</code> file with the correct custom domain name and also the path where the SSL/TSL certificate for the custom domain is going to be stored once the <code>Let&#x27;s Encrypt</code> initialization runs.</p><p>1) Replace the Nginx <code>server_name</code> property that has <code>ursa.earth</code> declared to yours.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name node.ursa.earth www.node.ursa.earth;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name node.ursa.earth www.node.ursa.earth;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As we are using <code>fleek-network-node.fleek.xyz</code>, as an example that&#x27;d look like:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name fleek-network-node.fleek.xyz;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name fleek-network-node.fleek.xyz;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>😅 Notice that we have omitted a lot of text for your convenience, you can always check out our remote repository for the original files, for example <a href="https://raw.githubusercontent.com/fleek-network/ursa/cd6fb3d21ce647dc3f06ee9128ba2a4164623ee5/docker/full-node/data/nginx/app.conf" target="_blank" rel="noopener noreferrer">here</a>. </p><p>If you have followed our introductory guides, you have probably commented out or removed the SSL configuration, keep reading to find the template or check the repository <code>app.conf</code> as mentioned earlier.</p><p>⚠️ Beware, that this is highly customizable and we might make tweaks in any earlier version of <code>ursa</code> which that guide might not consider. Check our original repository for any updates! Also, some advanced users have a preference to modify this on their own. In any case, for more on this you have to check the <a href="https://docs.nginx.com/" target="_blank" rel="noopener noreferrer">Nginx docs</a> to learn more!</p><blockquote><p>Note: if multiple domain names are used, the <code>init-letsencrypt.sh</code> script will export them under the first domain provided</p></blockquote><p>2) Replace the pathname with your custom domain, by replacing the following <code>ursa.earth</code> domain with yours</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># SSL code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_certificate /etc/letsencrypt/live/ursa.earth/fullchain.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_certificate_key /etc/letsencrypt/live/ursa.earth/privkey.pem;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For our demo, we replace <code>ursa.earth</code> to <code>fleek-network-node.fleek.xyz</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># SSL code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_certificate /etc/letsencrypt/live/fleek-network-node.fleek.xyz/fullchain.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_certificate_key /etc/letsencrypt/live/fleek-network-node.fleek.xyz/privkey.pem;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3) If you have followed our guides, it&#x27;s likely that you have commented out or removed the lines for the SSL certificates in the Nginx <code>app.conf</code> file.</p><p>Here&#x27;s an example of the missing part and how it should look like (take particular care that you have to replace <code>&lt;YOUR DOMAIN NAME&gt;</code> and that this is only if you have deleted the SSL configuration part in the <code>app.conf</code> file):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:443 ssl http2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name &lt;YOUR DOMAIN NAME&gt;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_tokens off;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # SSL code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl_certificate /etc/letsencrypt/live/&lt;YOUR DOMAIN NAME&gt;/fullchain.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl_certificate_key /etc/letsencrypt/live/&lt;YOUR DOMAIN NAME&gt;/privkey.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    include /etc/letsencrypt/options-ssl-nginx.conf;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    location /stub_status {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      stub_status;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/vnd.ipld.raw;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/vnd.ipld.car;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/octet-stream;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header cache-control public,max-age=31536000,immutable;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache nodecache;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_valid 200 31536000s;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header X-Proxy-Cache $upstream_cache_status;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_methods GET HEAD POST;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_key &quot;$request_uri|$request_body&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      client_max_body_size 1G;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_pass http://ursa:4069;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-lets-encrypt-automation-script">Running the Let&#x27;s Encrypt automation script<a class="hash-link" href="#running-the-lets-encrypt-automation-script" title="Direct link to heading">​</a></h3><p>First, change the directory to the <code>docker/full-node</code> path in your local repository. This is where our <code>init-letsencrypt.sh</code> is located!</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd docker/full-node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The directory file structure should look like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── docker-compose.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have to provide a domain name, such as the example <code>fleek-network-node.fleek.xyz</code> and a valid email address <code>ops@fleek.xyz</code> that you as an operator have access to.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">EMAIL=&quot;&lt;VALID EMAIL&gt;&quot; DOMAINS=&quot;&lt;DOMAIN WITH CORRECT DNS RECORDS&gt;&quot; ./init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since we have already:</p><ul><li>Updated the <code>A Records</code> in the <a href="#how-to-set-up-the-dns-settings-for-a-node-server">previous step</a></li><li><a href="#how-to-verify-dns-records">Verified</a> that the DNS records are correct</li></ul><p>We can execute the <code>init-letsencrypt.sh</code> by prefixing the script with the variables <code>EMAIL</code> and <code>DOMAINS</code>.</p><ul><li>DOMAINS - A list separated by space, e.g. <code>DOMAINS=&quot;foobar.com my-node.fleek.xyz&quot;</code></li><li>EMAIL - A valid email address that the server administrator, the ops operator or anyone of concern should have access to, e.g. <code>ops@fleek.xyz</code></li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">EMAIL=&quot;&lt;VALID EMAIL&gt;&quot; DOMAINS=&quot;&lt;DOMAIN WITH CORRECT DNS RECORDS&gt;&quot; ./init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For our example, that would look a bit like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">EMAIL=&quot;ops@fleek.xyz&quot; DOMAINS=&quot;fleek-network-node.fleek.xyz&quot; ./init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: if multiple domains are provided, the certificates will be stored under the first one</p></blockquote><p>If the script is executed successfully, the output should be similar to (have in mind that we are using <code>fleek-network-node.fleek.xyz</code> as an example, you should see yours):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Domains: fleek-network-node.fleek.xyz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Creating dummy certificate for fleek-network-node.fleek.xyz ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_USER variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_PASSWORD variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The UID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The GID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Creating full-node_certbot_run ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Generating a RSA private key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...........................................++++</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......................................................................................................................................................................................................++++</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">writing new private key to &#x27;/etc/letsencrypt/live/fleek-network-node.fleek.xyz/privkey.pem&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-----</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Starting nginx ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_USER variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_PASSWORD variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The UID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The GID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Recreating full-node_certbot_1 ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Recreating full-node_nginx_1   ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Deleting dummy certificate for fleek-network-node.fleek.xyz ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_USER variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_PASSWORD variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The UID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The GID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Creating full-node_certbot_run ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Requesting Let&#x27;s Encrypt certificate for fleek-network-node.fleek.xyz ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_USER variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The ADMIN_PASSWORD variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The UID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: The GID variable is not set. Defaulting to a blank string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Creating full-node_certbot_run ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving debug log to /var/log/letsencrypt/letsencrypt.log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Requesting a certificate for fleek-network-node.fleek.xyz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Successfully received certificate.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Certificate is saved at: /etc/letsencrypt/live/fleek-network-node.fleek.xyz/fullchain.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Key is saved at:         /etc/letsencrypt/live/fleek-network-node.fleek.xyz/privkey.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This certificate expires on 2023-04-25.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">These files will be updated when the certificate renews.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NEXT STEPS:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">If you like Certbot, please consider supporting our work by:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Donating to ISRG / Let&#x27;s Encrypt:   https://letsencrypt.org/donate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Donating to EFF:                    https://eff.org/donate-le</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Reloading nginx ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2023/01/25 18:56:34 [notice] 17#17: signal process started</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s a long output but we can find the last few paragraphs useful, where it reads:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Successfully received certificate.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Certificate is saved at: /etc/letsencrypt/live/fleek-network-node.fleek.xyz/fullchain.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Key is saved at:         /etc/letsencrypt/live/fleek-network-node.fleek.xyz/privkey.pem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This certificate expires on 2023-04-25.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">These files will be updated when the certificate renews.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may also find that the paragraph after, that mentions that the certificate expires is important. If you are running the Docker Stack we provide, the <code>certbot</code> is installed and automates renewing the certification for you.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">NEXT STEPS:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-run-a-domain-name-health-check">How to run a domain name health check?<a class="hash-link" href="#how-to-run-a-domain-name-health-check" title="Direct link to heading">​</a></h3><p>As previously instructed in our <a href="/guides/Network nodes/fleek-network-node-health-check-guide">guide</a>, we can do a quick health check by making <code>cURL</code> requests to our server and reading the response. There&#x27;s the option to get the response body that should be text <code>pong</code> or get some HTTP Headers.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl https://&lt;YOUR DOMAIN NAME&gt;/ping</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For our example, we have the domain <code>fleek-network-node.fleek.xyz</code> and this is how the <code>cURL</code> request would look like:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl https://fleek-network-node.fleek.xyz/ping</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A successful response should be <code>pong</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pong</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the flag <code>-I</code> to get the HTTP Headers. To learn more read the guide <a href="/guides/Network nodes/fleek-network-node-health-check-guide">here</a>.</p><p>You can do these tests from any remote location that is not your server or local machine and the health check should pass, as the port should be publicly available to any service on the internet.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h2><p>Congratulations! If you reached this far you have improved the security of your Network Node and helped contribute to a safer Fleek Network!</p><p>By providing a brief introduction to SSL/TLS certificates, the reasons why they exist or why you&#x27;d want to secure the Network Node, we jumped quickly to the domain name setup. After completing the verification of the DNS records, where our Stack and Node are running from, prepared the SSL configuration in our Nginx <code>app.conf</code> to then have the certificates generated by <code>Let&#x27;s encrypt</code>.</p><p>To complete we verified that our Node is healthy by doing a quick checkup, using one of the options previously discussed in our <a href="/guides/Network nodes/fleek-network-node-health-check-guide">Node health check</a> guide. We have then secured the Node!</p><p>While we do our best to provide the clearest instructions, there&#x27;s always space for improvement, therefore feel free to make any contributions by messaging us on our <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">Discord</a> or by opening a <a href="https://github.com/fleek-network" target="_blank" rel="noopener noreferrer">PR</a> in any of our repositories 🙏.</p><p>Discover more about the project by <a href="https://github.com/fleek-network/ursa" target="_blank" rel="noopener noreferrer">watching/contributing on Github</a>, following us on <a href="https://twitter.com/fleek_net" target="_blank" rel="noopener noreferrer">Twitter</a>, and joining <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">our community Discord</a> for all the best updates!</p><section class="author_card"><div><span class="avatar"><a href="https://github.com/heldrida" target="_blank" alt="Helder Oliveira"><img src="https://github.com/heldrida.png" alt="Helder Oliveira"></a></span><div><span class="name"><a href="https://github.com/heldrida" target="_blank" alt="Helder Oliveira">Helder Oliveira</a></span><span class="title">Software Developer + DX</span><span class="discord">Got questions? Find us on <a href="https://discord.gg/fleekxyz" target="_blank">Discord!</a></span></div></div></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/dcdn">DCDN</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/guide">Guide</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/getting-started">Getting Started</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/fleek-network">Fleek Network</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/security">security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/ssl-tsl">SSL/TSL</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/lets-encrypt">Let&#x27;s Encrypt</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/certbot">Certbot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/docker">Docker</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fleek-network/fleek-network-docs/edit/main/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-15T10:25:16.000Z">Feb 15, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Running a node in a Docker container</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#quick-video" class="table-of-contents__link toc-highlight">Quick Video</a></li><li><a href="#what-are-ssltls-certificates" class="table-of-contents__link toc-highlight">What are SSL/TLS certificates?</a></li><li><a href="#why-secure-the-network-node" class="table-of-contents__link toc-highlight">Why secure the Network Node?</a></li><li><a href="#domain-name-setup" class="table-of-contents__link toc-highlight">Domain name setup</a><ul><li><a href="#how-to-set-up-the-dns-settings-for-a-node-server" class="table-of-contents__link toc-highlight">How to set up the DNS settings for a Node server?</a></li><li><a href="#alternatively-how-can-one-get-a-free-domain-name-for-testing" class="table-of-contents__link toc-highlight">Alternatively, how can one get a free domain name for testing?</a></li><li><a href="#how-to-verify-dns-records" class="table-of-contents__link toc-highlight">How to verify DNS records?</a></li></ul></li><li><a href="#stack-services" class="table-of-contents__link toc-highlight">Stack Services</a></li><li><a href="#nginx-ssltls-configuration" class="table-of-contents__link toc-highlight">NGINX SSL/TLS configuration</a><ul><li><a href="#which-came-first-the-chicken-or-the-egg" class="table-of-contents__link toc-highlight">Which came first: the chicken or the egg?</a></li><li><a href="#creating-a-valid-certificate" class="table-of-contents__link toc-highlight">Creating a valid certificate</a></li><li><a href="#preparing-the-lets-encrypt-initialization-script" class="table-of-contents__link toc-highlight">Preparing the Let&#39;s Encrypt initialization script</a></li><li><a href="#running-the-lets-encrypt-automation-script" class="table-of-contents__link toc-highlight">Running the Let&#39;s Encrypt automation script</a></li><li><a href="#how-to-run-a-domain-name-health-check" class="table-of-contents__link toc-highlight">How to run a domain name health check?</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="left" href="/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/blog">Engineering</a></li><li class="footer__item"><a class="footer__link-item" position="left" activebasepath="guides" href="/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" position="left" activebasepath="reference" href="/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fleek_net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://fleek.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fleek-network" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--left"><div class="margin-bottom--sm"><a href="https://fleek.network" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/logo+named.svg?202301101154" alt="Fleek Network" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160"><img src="/img/logo+named.svg?202301101154" alt="Fleek Network" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8a0983d7.js"></script>
<script src="/assets/js/main.f0e9a9e5.js"></script>
</body>
</html>