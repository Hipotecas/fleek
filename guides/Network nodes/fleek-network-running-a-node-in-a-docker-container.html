<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-guides docs-doc-id-Network nodes/fleek-network-running-a-node-in-a-docker-container">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Running a node in a Docker container | Fleek Network Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.fleek.network/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-guides-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-guides-current"><meta data-rh="true" property="og:title" content="Running a node in a Docker container | Fleek Network Docs"><meta data-rh="true" name="description" content="A guide on how to run Fleek Network&#x27;s node in a docker container"><meta data-rh="true" property="og:description" content="A guide on how to run Fleek Network&#x27;s node in a docker container"><meta data-rh="true" property="og:image" content="https://docs.fleek.network/assets/images/fleek-network-docker-setup-overview-21d7c36e90ff938ceeea51a18002fd27.png"><meta data-rh="true" name="twitter:image" content="https://docs.fleek.network/assets/images/fleek-network-docker-setup-overview-21d7c36e90ff938ceeea51a18002fd27.png"><link data-rh="true" rel="icon" href="/img/favicon.ico?202301091316"><link data-rh="true" rel="canonical" href="https://docs.fleek.network/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container"><link data-rh="true" rel="alternate" href="https://docs.fleek.network/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.fleek.network/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZLPPXSKTFE-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fleek Network Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fleek Network Docs Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Fleek Network Docs JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPHQQEZ1SP"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GPHQQEZ1SP",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Fleek Network Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7a35f634.css">
<link rel="preload" href="/assets/js/runtime~main.8a0983d7.js" as="script">
<link rel="preload" href="/assets/js/main.f0e9a9e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png?2023091241" alt="Fleek" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png?2023091241" alt="Fleek" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/blog">Engineering</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides">Guides</a><a class="navbar__item navbar__link" href="/reference">Reference</a></div><div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides">Introducing guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/guides/Network nodes/fleek-network-getting-started-guide">Network nodes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-getting-started-guide">Getting Started Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-how-to-get-the-latest-updates-for-ursa-cli-from-the-source-repository">How to get the latest updates for Ursa CLI from the source repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/how-to-install-a-node-easily-with-the-assisted-installer">How to install a node easily with the assisted installer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-how-to-install-rust-and-the-dependencies-for-ursa-cli">How to install Rust and the dependencies for Ursa CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-managing-the-key-store">Fleek Network: Managing the key store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-node-health-check-guide">Node Health Check guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-packing-content-addressed-data">How to deal with files using Content Addressable aRchives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container">Running a node in a Docker container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls">Securing a node with SSL/TLS</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p><img loading="lazy" alt="Fleek Network: Running a node in a Docker container" src="/assets/images/fleek-network-docker-setup-overview-21d7c36e90ff938ceeea51a18002fd27.png" width="1200" height="628" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Our <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a> <a href="https://docs.docker.com/engine/reference/commandline/images/" target="_blank" rel="noopener noreferrer">image</a> provides all the requirements to have Fleek Network running quickly 🌈 and the following guide will provide you a quick reference to get you started with Docker 🔥! </p><p><strong>TL;DR</strong> If you have Docker experience then you&#x27;ll find ours <a href="#for-the-impatient">for the impatient</a> more satisfying!</p><p>Alternatively, if you need a deep dive into Docker, check the official getting started <a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">​</a></h2><p>To follow the guide, you will need the following:</p><ul><li>Familiarity with the command-line interface</li><li>Git</li></ul><blockquote><p>🤖 As Fleek Network&#x27;s repositories are in constant development and change, you should consider that the following guide was <a href="https://git-scm.com/docs/git-checkout" target="_blank" rel="noopener noreferrer">checked in</a> to commit <code>676b01d</code>. While we try our best to update documentation and guides during development, there might be breaking changes that might take some time to reflect in our docs. To avoid disappointment, feel free to check into commit <code>676b01d</code> or contribute by getting in touch with us, or sending a PR in the relevant context. Learn how to checkout a commit in our repository history <a href="/reference/Git/how-to-checkout-a-commit-in-project-history">here</a> 🙏.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="for-the-impatient-">For the impatient 😤<a class="hash-link" href="#for-the-impatient-" title="Direct link to heading">​</a></h2><p>For the one&#x27;s interested in running the node as quickly as possible, there are a few options, among those we pick two you might find handy:</p><ul><li><p>Install a Network Node in a Linux Server e.g., Ubuntu or Debian latest by using our &quot;Get Fleek Network&quot;, an assisted installer to help onboard as quickly as possible by simply executing <code>curl https://get.fleek.network | bash</code>. Learn more about the assisted installer <a href="/guides/Network nodes/how-to-install-a-node-easily-with-the-assisted-installer">here</a></p></li><li><p>A Docker compose Stack, which is an opinionated stack that provides a reverse proxy service for the Node (Proxied internal <code>4069</code> to external ports <code>80</code> and <code>443</code>), a service to enable HTTPS on your server, services for monitoring and analytics, etc. You can run a stack quickly by following the instructions in <a href="#run-the-container-from-the-recommended-stack">run the container from the recommended stack</a>.</p></li><li><p>Building a Docker image requires some effort and some of our users might find it easier to pull our nightly image for quick access to Ursa, which does not require them to build from source. For that reason, we provide you with a quick demonstration of how to pull the image and run the Docker container quickly! Check the <a href="#run-the-container-from-the-official-nightly-image">run the container from the official nightly image</a></p></li></ul><p>At some point in time, you will have to look at how things work and figure out what abstractions did wrong. For some advanced users that are used to it is not a big deal, but for everyone else that might cause quite a lot of hassle! Therefore, challenge yourself to learn the basics instead of executing commands you are yet to understand, this guide is your friend!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-video">Quick Video<a class="hash-link" href="#quick-video" title="Direct link to heading">​</a></h2><p>A walkthrough video is provided as a quick reference for the users, we try to keep it simple and would suggest the text guide version to get more detailed information. </p><p>The video content is stored in our Fleek Network <a href="https://www.youtube.com/watch?v=uAFIDu3UBvw&amp;list=PL3v9ZaTBrN9GEQ2NmS5xc6YH0E2df5VTn" target="_blank" rel="noopener noreferrer">playlist</a> on the Fleek XYZ <a href="https://www.youtube.com/@fleekxyz" target="_blank" rel="noopener noreferrer">Youtube channel</a>.</p><div class="youtube-player"><iframe src="https://www.youtube.com/embed/uAFIDu3UBvw?controls=1&amp;modestbranding=1&amp;playsinline=1&amp;rel=0" title="Running a node in a Docker container" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>How do you find the video content? Help us improve by sending feedback in our Discord channel <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a class="hash-link" href="#setup" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><p>To follow the guide successfully, a good amount of memory and disk space is necessary to run Docker. The main reason for our use-case is that your host machine requires a generous amount of memory and disk space, for the containers.</p><p>Here&#x27;s a quick look into the resources used during runtime (very quiet usage 😴 at time of writing):</p><table><thead><tr><th>Name</th><th>CPU %</th><th>Memory usage / Limit</th><th>Mem %</th></tr></thead><tbody><tr><td>ursa-cli</td><td>1.06%</td><td>49.7MiB / 7.775GiB</td><td>0.62%</td></tr></tbody></table><p>In the example, for this guide, we have 8 GB spare memory and 20 GB spare disk space that we&#x27;ll set up Docker to run our node! You&#x27;ll find more about that later in the <a href="#recommended-settings">recommended settings</a> section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ursa-cli-source-code">Ursa CLI source-code<a class="hash-link" href="#ursa-cli-source-code" title="Direct link to heading">​</a></h3><p>Start by cloning the repository located at <a href="https://github.com/fleek-network/ursa" target="_blank" rel="noopener noreferrer" title="https://github.com/fleek-network/ursa">https://github.com/fleek-network/ursa</a>.</p><p>You have several ways of doing this:</p><ul><li>Clone via HTTPS</li><li>Clone via SSH</li><li>Download via Github CLI</li><li>Download the <a href="https://github.com/fleek-network/ursa/archive/refs/heads/main.zip" target="_blank" rel="noopener noreferrer">zip package</a> from the repository</li></ul><p>We recommend HTTPS because it is the easiest to set up on the wild, and by users who are new to all this.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/fleek-network/ursa.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Although, we strongly recommend using an SSH connection when interacting with GitHub. If you are to this and are interested read more about it <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone git@github.com:fleek-network/ursa.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The command will copy the repository files to your local machine, by default into a directory by the name of the repository <code>ursa</code>.</p><p>When git clone completes 👍, <code>change directory</code> to the project directory e.g. we cloned to the default name <code>ursa</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ursa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you list (<code>ls</code>) the files in the directory, it should be similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Dockerfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Makefile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── crates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── infra</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── rust-toolchain.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── specs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-docker-desktop">Install Docker desktop<a class="hash-link" href="#install-docker-desktop" title="Direct link to heading">​</a></h3><p>The simplest way to run docker is to visit the <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">https://www.docker.com/</a>, download and install Docker Desktop.</p><p>💡 Some users might prefer to look into the Docker daemon (dockerd), in that case, check the <a href="https://docs.docker.com" target="_blank" rel="noopener noreferrer">docs</a>, as we&#x27;re trying to keep it simple here! If you are going to install and run the Docker daemon (e.g., Linux Ubuntu server) remember to enable BuildKit (required by Docker build), check out reference <a href="/reference/Docker/buildkit-required-by-docker-build">here</a>.</p><p>Once Docker desktop is installed, you should start or open the application in your operating system! </p><p>Also, you&#x27;ll be able to run it via the CLI, as such:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Docker version 20.10.6, build 370c289</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s do the same for <code>docker-compose</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker-compose -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker-compose version 1.29.1, build c34c88b2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>💡 Versions might differ a bit from the time of writing.</p><p>The following command&#x27;s output will indicate if Docker&#x27;s working correctly:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run hello-world</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">latest: Pulling from library/hello-world</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2db29710123e: Pull complete </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Digest: sha256:faa03e786c97f07ef34423fccceeec2398ec8a5759259f94d99078f264e9d7af</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Status: Downloaded newer image for hello-world:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Hello from Docker!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This message shows that your installation appears to be working correctly.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To generate this message, Docker took the following steps:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 1. The Docker client contacted the Docker daemon.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    (amd64)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 3. The Docker daemon created a new container from that image which runs the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    executable that produces the output you are currently reading.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    to your terminal.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To try something more ambitious, you can run an Ubuntu container with:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> $ docker run -it ubuntu bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Share images, automate workflows, and more with a free Docker ID:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> https://hub.docker.com/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">For more examples and ideas, visit:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> https://docs.docker.com/get-started/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run all the commands above in your terminal, to confirm everything&#x27;s working before proceeding to the next steps, please! 👍 </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-settings">Recommended settings<a class="hash-link" href="#recommended-settings" title="Direct link to heading">​</a></h3><p>As mentioned in the <a href="#requirements">requirements</a> you&#x27;ll need enough disk space and memory to run containers successfully.</p><p>As an example, during build time, the minimum memory required is about 8 GB! If you do not have enough memory configured in the Docker preferences, you might encounter errors, such as:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 139.1    Compiling actix-web v4.2.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 143.4    Compiling jsonrpc-v2 v0.11.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 The following warnings were emitted during compilation:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 warning: c++: fatal error: Killed signal terminated program cc1plus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 warning: compilation terminated.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 error: failed to run custom build command for `librocksdb-sys v0.8.0+7.4.4`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.5 Caused by:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   process didn&#x27;t exit successfully: `/usr/src/app/target/release/build/librocksdb-sys-c0aabb249f648650/build-script-build` (exit status: 1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   --- stdout</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   cargo:rerun-if-changed=rocksdb/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   TARGET = Some(&quot;x86_64-unknown-linux-gnu&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   OPT_LEVEL = Some(&quot;z&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   HOST = Some(&quot;x86_64-unknown-linux-gnu&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#13 183.6   cargo:rerun-if-env-changed=CXX_x86_64-unknown-linux-gnu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are running Docker desktop application, open the dashboard settings and in the &quot;resources&quot; change the memory to the recommended size 8 GB. If you need instructions to locate the settings page, visit the Docker official documentation, here&#x27;s an example for <a href="https://docs.docker.com/desktop/settings/linux" target="_blank" rel="noopener noreferrer">Linux</a> and <a href="https://docs.docker.com/desktop/settings/macos" target="_blank" rel="noopener noreferrer">MacOS</a>.</p><p>Make sure that you have configured Docker desktop with the <a href="#recommended-settings">recommended settings</a>, before proceeding any further!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="image">Image<a class="hash-link" href="#image" title="Direct link to heading">​</a></h2><p>A Docker image is a read-only template with instructions for creating a Docker container, like a template. Docker images also act as a the starting point when using Docker. </p><p>The starting point for our use-case is a Dockerfile, where all those &quot;template instructions&quot; are declared.</p><p>Here&#x27;s how our <a href="https://github.com/fleek-network/ursa/blob/22de01ecb4be347e2b76f17e4e40e4fd9956e69b/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile</a> looks like.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-the-docker-image">Build the Docker image<a class="hash-link" href="#build-the-docker-image" title="Direct link to heading">​</a></h3><p>We are assuming 😅 that you&#x27;ve followed our <a href="/guides/Network nodes/fleek-network-getting-started-guide">Fleek Network: Getting started guide</a> and have successfully cloned the <code>ursa</code> repository. If you haven&#x27;t give it a go, before you proceed!</p><p>The reason is that the image builder requires the source files as the input file to have information to build a container, as mentoned <a href="#image">earlier</a>. </p><p>The <a href="https://github.com/fleek-network/ursa/blob/22de01ecb4be347e2b76f17e4e40e4fd9956e69b/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile</a> is located in the Ursa repository (at time of writing), <a href="https://github.com/fleek-network/ursa/blob/22de01ecb4be347e2b76f17e4e40e4fd9956e69b/Dockerfile" target="_blank" rel="noopener noreferrer">here</a>.</p><p>If you have cloned the project correctly, you should <code>change directory</code> to the project root directory.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd &lt;PATH-TO-URSA-DIRECTORY&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example, ours is located at <code>/Users/fleek/ursa</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd /Users/fleek/ursa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At time of writing, this is how the project root looks like (e.g. use the <a href="https://en.wikipedia.org/wiki/Ls" target="_blank" rel="noopener noreferrer">ls</a> to see the list):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Dockerfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Makefile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── crates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── infra</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── rust-toolchain.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── specs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Double-check that your work directory is in the project root. You&#x27;ll build the Docker image based in the <a href="https://github.com/fleek-network/ursa/blob/32928e78afa0bbed8241ddc4d7e2456752456fd6/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile</a>.</p></blockquote><p>When ready, run the Docker build command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker build -t ursa -f ./Dockerfile .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are running the Docker daemon (not the Desktop version), BuildKit needs to be enabled.</p><p>💩 BuildKit is required by Docker Build if you are running the docker daemon (desktop users have it enabled by default), read our reference <a href="/reference/Docker/buildkit-required-by-docker-build">BuildKit required by Docker build</a> to learn more about how to enable it.</p><p>The build process takes awhile and you have to wait for completion. </p><p>🤖 The output should be similar to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[+] Building 16.1s (8/16)                                                                                                                           </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; [internal] load build context                                                                                                              0.2s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; transferring context: 12.95MB                                                                                                           0.2s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; [builder 1/6] FROM docker.io/library/rust:latest@sha256:6d44ed87fe759752c89d1f68596f84a23493d3d3395ed843d3a1c104866e5d9e                  13.5s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; resolve docker.io/library/rust:latest@sha256:6d44ed87fe759752c89d1f68596f84a23493d3d3395ed843d3a1c104866e5d9e                           0.0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; sha256:6d44ed87fe759752c89d1f68596f84a23493d3d3395ed843d3a1c104866e5d9e 988B / 988B                                                     0.0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; sha256:6c20d87766142d058f3e21874fe1db426c49ce3e1575c8c300fdc27d06db92a9 1.59kB / 1.59kB                                                 0.0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; sha256:c85a0be79bfba309d1f05dc40b447aa82b604593531fed1e7e12e4bef63483a5 10.88MB / 10.88MB                                              10.1s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> =&gt; =&gt; sha256:c7bf205db148c9f9202dbece143e86487c678d108c3936897cfd9bcd7915dd3c 6.42kB / 6.42kB                                                 0.0s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>⚠️ The Docker image is only required to be built once and/or, when changes are pulled from the remote repository, or versions you might be interested in! Otherwise, you&#x27;re not required to build it everytime to run the node. If you&#x27;d like to learn how to update the Ursa CLI, find our guide <a href="#fleek-network-how-to-get-the-latest-updates-for-ursa-cli-from-the-source-repository">here</a>.</p><blockquote><p>Bear in mind that if you don&#x27;t update your build often, you won&#x27;t have the latest changes, which happen frequently with all the ongoing development! This is quite important to understand, as it causes confusion to some users. The Ursa application at time of writing does not update automatically.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="container">Container<a class="hash-link" href="#container" title="Direct link to heading">​</a></h2><p>A container is what&#x27;s originated from the image we discussed <a href="#image">earlier</a>, it is a runnable instance of an image! We can create, start, stop, move, or delete a container using the Docker API or CLI.</p><p>Following up, we&#x27;ll learn how to run the Docker container that includes our <code>ursa</code> program, built from our source <a href="https://github.com/fleek-network/ursa/blob/32928e78afa0bbed8241ddc4d7e2456752456fd6/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile</a>.</p><p>📢 We&#x27;ve been referencing the Dockerfile to a particular commit hash in our repository, to secure the pointer to it, but you are free to check any commit message, including the latest version of our main branch! This is explained in our guide to help you update the Ursa CLI source and binary <a href="#fleek-network-how-to-get-the-latest-updates-for-ursa-cli-from-the-source-repository">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-container-from-the-official-nightly-image">Run the container from the official nightly image<a class="hash-link" href="#run-the-container-from-the-official-nightly-image" title="Direct link to heading">​</a></h3><p>The Fleek Network Ursa image is built nightly, and some of our users might find handy to pull it instead of building it for quick access to a running node!</p><blockquote><p>The official <a href="https://github.com/fleek-network/ursa/pkgs/container/ursa" target="_blank" rel="noopener noreferrer">fleek-network/ursa:nightly</a> image is currently hosted in Github&#x27;s container registry and updated every night, you can <code>docker pull</code> the image and run it locally. Beware that the version is built at a particular time of the day, so if you are looking for a custom image then you&#x27;re better off learning how to build one yourself. The extended guide provides you all the information you need, but we also have a guide on how to update images that you may be interested in reading <a href="/guides/Network nodes/fleek-network-packing-content-addressed-data">here</a></p></blockquote><p>Firstly, start by running the <code>docker pull</code>, as follows:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker pull ghcr.io/fleek-network/ursa:nightly</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>⚠️ Important: The Github container registry is private, you need a Github account and private token to login via the CLI to be able to pull, find the instructions <a href="https://ghcr.io/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Once the Docker image is downloaded completely, you can run a container based on the image:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -p 4069:4069 -p 6009:6009 -v $HOME/.ursa/:/root/.ursa/:rw --name ursa-cli -it ghcr.io/fleek-network/ursa:nightly</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that the command arguments we pass are for the flag&#x27;s <code>-p</code> for port numbers, <code>-v</code> to bind mount a location in your host to a container path (useful to persist your ursa configuration files, e.g. keystore), <code>--name</code> to make it easier to identify, <code>-it</code> to make it interactive (e.g. presents output to the terminal), and the image name we pulled earlier (ghcr.io/fleek-network/ursa:nightly), if you hadn&#x27;t pulled and not found, docker would pull it for you.</p><p>You can then do a quick healthcheck as described <a href="#ursa-healthcheck">here</a>.</p><p>For more detailed information, such as the commands explained, port numbers, output example, etc, read the <a href="#run-the-docker-container">run the Docker container</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-docker-container">Run the Docker container<a class="hash-link" href="#run-the-docker-container" title="Direct link to heading">​</a></h3><p>Once the Docker image is ready ✅, you can run it by providing a container and image name!</p><p>Since we want to interact with the process <code>ursa</code>, we&#x27;ll run in interactive mode by using the flags <code>-it</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -p 4069:4069 -p 6009:6009 -v $HOME/.ursa/:/root/.ursa/:rw --name ursa-cli -it ursa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are providing a custom name of our liking (ursa-cli) for the container and the image name we have built previously (ursa). Also, we do a bind mount to mount a file or directory on the host machine into a container, as an example, this is useful to persist the configuration for the identity. Find more on managing the identity <a href="#fleek-network-managing-the-key-store">here</a>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run [-p &lt;HOST-PORT&gt;:&lt;CONTAINER-PORT&gt;] --name &lt;CONTAINER-NAME&gt; -v &lt;HOST-PATH&gt;:&lt;CONTAINER-PATH&gt; -it &lt;IMAGE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>💡 We understand these commands might be hard to remember and provide some utility commands for your convenience. Although, if you need naming, port customisation, then you can stick with the knowledge you&#x27;ve acquired, or use this document as a reference. The utility commands require <a href="https://www.gnu.org/software/make/manual/make.html" target="_blank" rel="noopener noreferrer">make</a>, most operating systems have it installed by default, otherwise you can use a web search engine to find instructions on how to install it in your operating system.</p></blockquote><p>The utility commands are the <code>docker-build</code> and <code>docker-run</code>.</p><p>Respectively, execute <code>docker-build</code> to build the Docker image:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make docker-build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the <code>docker-run</code> to run the Docker container based on the built image:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make docker-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>⚠️ At the time of writing the <code>make docker-run</code> does not persist the Ursa configuration (<a href="#fleek-network-managing-the-key-store">options, key store, identity</a>, etc), you&#x27;d be better off executing the actual <code>docker run</code> command without the sugar coating for better control and sanity check! This happens because the <code>-v &lt;HOST-PATH&gt;:&lt;CONTAINER-PATH&gt;</code> bind mount is missing in the makefile declaration <code>make docker-run</code>, this can change at any time so be wary of commands that create unnecessary abstractions! On the other hand, you might find it useful to use our <a href="#running-a-stack-with-docker-compose">proposed stack</a> which has the appropriate binding mounts for you.</p><p>💡 Remember, the utility commands will use default naming and port numbers. Use the original Docker commands for better control or customization.</p><p>If all goes well, the output should be similar to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.943684Z  INFO ursa: UrsaConfig: UrsaConfig { mdns: false, relay_server: true, autonat: true, relay_client: true, swarm_addr: &quot;/ip4/0.0.0.0/tcp/6009&quot;, bootstrap_nodes: [&quot;/ip4/159.223.211.234/tcp/6009/p2p/12D3KooWDji7xMLia6GAsyr4oiEFD2dd3zSryqNhfxU3Grzs1r9p&quot;, &quot;/ip4/146.190.232.131/tcp/6009/p2p/12D3KooWGw8vCj9XayJDMXUiox6pCUFm7oVuWkDJeE2H9SDQVEcM&quot;], database_path: Some(&quot;ursa_db&quot;), identity: &quot;default&quot;, keystore_path: &quot;/root/.config/ursa/keystore&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.944223Z ERROR ursa::ursa::identity: Failed to load identity `No such file or directory (os error 2)`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.946079Z  INFO ursa::ursa::identity: Created identity `default` (12D3KooWRis5Gn8TrKNyvx5iizTMKqVyJehw2KRSRAR79FMnxLqQ)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.946119Z  INFO ursa: Using ursa_db as database path</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.974520Z  INFO ursa_network::discovery: Bootstrapping with [(PeerId(&quot;12D3KooWDji7xMLia6GAsyr4oiEFD2dd3zSryqNhfxU3Grzs1r9p&quot;), &quot;/ip4/159.223.211.234/tcp/6009&quot;), (PeerId(&quot;12D3KooWGw8vCj9XayJDMXUiox6pCUFm7oVuWkDJeE2H9SDQVEcM&quot;), &quot;/ip4/146.190.232.131/tcp/6009&quot;)]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975579Z  INFO ursa_rpc_server::server: Server (Rpc and http) starting up</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975618Z  INFO ursa_index_provider::provider: index provider starting up</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975632Z  INFO ursa_rpc_server::server: listening on 0.0.0.0:4069</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975806Z  INFO ursa_index_provider::provider: index provider listening on: 0.0.0.0:8070</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975553Z  INFO ursa_network::service: Node starting up with peerId PeerId(&quot;12D3KooWRis5Gn8TrKNyvx5iizTMKqVyJehw2KRSRAR79FMnxLqQ&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2022-12-05T17:06:25.975885Z  INFO ursa_metrics::metrics: listening on 0.0.0.0:4070</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or, you might find familiar,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:17 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:22 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:27 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:32 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:37 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:42 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:47 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:52 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:08:57 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:02 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:07 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:12 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:17 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:22 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 172.19.0.3 - - [06/Jan/2023:19:09:27 +0000] &quot;GET /stub_status HTTP/1.1&quot; 200 100 &quot;-&quot; &quot;Go-http-client/1.1&quot; &quot;-&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A few points to notice are the listener port number and hostname 👀. As described in the <a href="#run-the-docker-container">Run the Docker container</a>, the container listener port number is exposed to your host&#x27;s port number.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ursa-healthcheck">Ursa healthcheck<a class="hash-link" href="#ursa-healthcheck" title="Direct link to heading">​</a></h3><p>Here&#x27;s an example of a curl request for the http headers, as a quick healthcheck.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -I 127.0.0.1:4069</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output displays some http headers:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP/1.1 405 Method Not Allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">content-length: 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">date: Tue, 06 Dec 2022 17:09:16 GMT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For users who need high customisation 😎, the Docker port binding is an important concept to understand when working with containers 🧐. For example, we can extend the previous <code>p</code> by providing.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-p &lt;HOST-ADDRESS&gt;:&lt;CONTAINER-PORT&gt;:&lt;HOST-PORT&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Following up 👇, we&#x27;ll look into how to control Ursa via the container&#x27;s processes, to help you understand a bit more of Ursa. This can be useful, if you want to follow some of ursa subcommands explained in the <a href="/guides/Network nodes/fleek-network-getting-started-guide">Fleek Network: Getting started guide</a>, or if you need to interact with the process in the container:</p><ul><li><a href="#stop-the-docker-container">Stop the Docker container</a></li><li><a href="#restart-the-docker-container">Restart the Docker container</a></li><li><a href="#delete-the-docker-container">Delete the Docker container</a></li><li><a href="#execute-bash-shell-in-the-container">Execute bash shell in the container</a></li><li><a href="#stop-the-docker-container">Stop the Docker container</a></li></ul><p>If you are not interested in this level of control and detail 😹, or rather check these later, you can skip to <a href="#running-a-stack-with-docker-compose">running a stack with Docker compose</a>, the simplest and opinionated way to start Ursa along other services to help you monitor, etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="utility-commands">Utility commands<a class="hash-link" href="#utility-commands" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stop-the-docker-container">Stop the Docker container<a class="hash-link" href="#stop-the-docker-container" title="Direct link to heading">​</a></h3><p>After you&#x27;re done with the process ⏳, the Docker container can be stopped by:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker stop &lt;CONTAINER-NAME&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In our case, we&#x27;d like to stop <code>ursa-cli</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker stop ursa-cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restart-the-docker-container">Restart the Docker container<a class="hash-link" href="#restart-the-docker-container" title="Direct link to heading">​</a></h3><p>After the initial run of the project Dockerfile image, we can restart it by the container name:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker start &lt;CONTAINER-NAME&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Our container name is <code>ursa-cli</code>, so we do:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker start ursa-cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We haven&#x27;t set any of the host or port number bindings, that information is part of the metadata of a container, which is immutable, it&#x27;s persistant.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-the-docker-container">Delete the Docker container<a class="hash-link" href="#delete-the-docker-container" title="Direct link to heading">​</a></h3><p>The Docker container can be removed by:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker rm &lt;CONTAINER-NAME&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For what matters to us, we&#x27;d like to delete <code>ursa-cli</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker rm ursa-cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we delete a container, it&#x27;s no longer available and thus we&#x27;d have to <a href="#run-the-docker-container">Docker run</a> 👷.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-ursa-cli-commands-in-the-container">Execute Ursa CLI commands in the container<a class="hash-link" href="#execute-ursa-cli-commands-in-the-container" title="Direct link to heading">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker exec -it &lt;CONTAINER-NAME&gt; &lt;FILEPATH&gt; &lt;ARGS&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, we&#x27;ll interact with the container named <code>ursa-cli</code> and execute <code>ursa</code> which is located in the <code>/usr/local/bin</code>, with the flag <code>version</code> to get the version number of the <code>ursa cli</code> we are running.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker exec -it ursa-cli ursa --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If successful, you&#x27;ll get the version number (beware that version might differ from time of writing, as Ursa is in constant development).</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ursa 0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-bash-shell-in-the-container">Execute bash shell in the container<a class="hash-link" href="#execute-bash-shell-in-the-container" title="Direct link to heading">​</a></h3><p>Start the bash shell in the container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker exec -it &lt;CONTAINER-NAME&gt; bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As we have <code>ursa-cli</code> for our container name example, do:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker exec -it ursa-cli bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>👩‍💻 Here, we&#x27;re just looking into how to execute a process in the container where host and port binding is still relevant and required to be applied if you haven&#x27;t, otherwise your host will not have the correct bindings. Bear in mind that Docker executes a process in the container, not your host!</p><p>For example, we could then check the <code>help</code> flag.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ursa --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CLI options</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USAGE:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ursa [FLAGS] [OPTIONS] [SUBCOMMAND]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FLAGS:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -h, --help       Prints help information</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -r, --rpc        Allow rpc to be active or not (default = true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -V, --version    Prints version information</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OPTIONS:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -c, --config &lt;config&gt;                  A toml file containing relevant configurations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -d, --database-path &lt;database-path&gt;    Database path where store data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -i, --identity &lt;identity&gt;              Identity name. If not provided, a default identity will be created and reused</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                           automatically</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -k, --keystore-path &lt;keystore-path&gt;    Path to the keystore directory. Defaults to ~/.config/ursa/keystore</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -r, --rpc-port &lt;rpc-port&gt;              Port used for JSON-RPC communication</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SUBCOMMANDS:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    help    Prints this message or the help of the given subcommand(s)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    rpc     run rpc commands from cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>💡 At time of writing the Docker build places the ursa binary in the pathname <code>/usr/local/bin</code>, making <code>ursa</code> globally executable. On previous Dockerfile versions it was located in <code>/</code>, we had to execute it with the absolute path <code>/ursa --help</code>. Pull the latest from the repository and build if you are finding you have to use the deprecated method. In any case, either running on Docker or a Host machine, make sure the directory location where the <code>ursa</code> binary is stored is declared in the system&#x27;s PATH environment variable.</p><p>Executing the bash shell in the container is not mandatory and what we shared here is to demonstrate how to interact with the <code>ursa</code> process for the users that don&#x27;t have it on their local machines and/or are interested in checking subcommands, learning, following tutorials, etc in the same way someone who have it installed in their operating system would.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-container-from-the-recommended-stack">Run the container from the recommended stack<a class="hash-link" href="#run-the-container-from-the-recommended-stack" title="Direct link to heading">​</a></h2><p>Stack is a way to describe a list of services (applications), we&#x27;ll have running in our network and Docker Compose is a tool for defining and running multi-container Docker applications (services).</p><p>We&#x27;ll find out how to run an opinionated stack to help us run Fleek Network, with monitoring, etc.</p><p>Also, by using Docker compose it&#x27;ll be easier to persist the configuration files (config.toml, identity, etc). Therefore, this is the recommended way to run a node in a docker container.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-a-stack-with-docker-compose">Running a stack with Docker compose<a class="hash-link" href="#running-a-stack-with-docker-compose" title="Direct link to heading">​</a></h3><p>We have defined a Stack 🕸 that can be useful for running and monitoring; At time of writing, this is declared in a docker-compose file located <a href="https://github.com/fleek-network/ursa/blob/cfbbe6208dc6a33d28b43c6e6820ab76c2905353/infra/ursa/docker-compose.yml" target="_blank" rel="noopener noreferrer">here</a>.</p><p>There you&#x27;ll find specified all the configuration options, such as the ones we&#x27;ve discussed in the previous topics about the host, port bindings, bind mount, etc. You don&#x27;t have to constantly verify if specified all the correct options when running the Docker containers. Plus, we have these setup for you <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">grafana</a>, <a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">prometheus</a>, <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">certbot</a> and <a href="https://www.nginx.com/" target="_blank" rel="noopener noreferrer">nginx</a>. </p><p>Also, the docker compose file can be customized to your preference, Docker will detect any changes recreating the container if and when necessary.</p><p>For this guide 📒, we&#x27;ll look into how to start and stop the stack only!</p><p>Before proceeding, make sure you have the image ready! If you haven&#x27;t already a quick utility method is available as the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make compose-build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>💡 If you have compose-build previously, you&#x27;ll find that some services will be skipped, such as for the ones which we have set as imagens and don&#x27;t have to build.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">certbot uses an image, skipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx uses an image, skipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginxexporter uses an image, skipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">prometheus uses an image, skipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">grafana uses an image, skipping</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>💡 The <code>ursa</code> Docker image should be built every time you want to pull and use an update, learn how by following the guide <a href="#fleek-network-how-to-get-the-latest-updates-for-ursa-cli-from-the-source-repository">here</a>.</p><p>In the project root, execute the docker-compose command by providing the <code>docker-compose.yml</code> configuration file and the subcommand up.</p><p>💩 If you are running the Docker daemon (not the Desktop version), BuildKit needs to be enabled, (desktop users have it enabled by default). Read our reference <a href="/reference/Docker/buildkit-required-by-docker-build">BuildKit required by Docker build</a> to learn more about how to enable it!</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker-compose -f &lt;DOCKER-COMPOSE-FILEPATH&gt; &lt;up | down&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For our use-case, here&#x27;s how it&#x27;ll look like:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker-compose -f docker/full-node/docker-compose.yml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where for stopping, you have option <code>down</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker-compose -f docker/full-node/docker-compose.yml down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also, we provide the following utility commands for your convenience.</p><p>A command to execute the docker compose up:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make compose-up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also, to execute the docker compose down:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make compose-down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, we have an opinionated stack that you can use as a base for your system, or as a reference, for your research and learning. This means you aren&#x27;t obligated to use Grafana or Prometheus. Ursa works without any dependency!</p><p>💡 Learn more about <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">docker compose</a> by checking the documentation <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>If you&#x27;d like to use some of the points available in the guide, such as to <a href="#execute-bash-shell-in-the-container">execute bash shell in the container</a>, you need to ensure that the <a href="https://github.com/fleek-network/ursa/blob/cfbbe6208dc6a33d28b43c6e6820ab76c2905353/infra/ursa/docker-compose.yml" target="_blank" rel="noopener noreferrer">Docker compose file</a> have set the <code>container_name</code> to the name of your preference for our examples we chose <code>ursa-cli</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ursa:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: ursa-cli</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At time of writing, you&#x27;ll find that the output presents errors. The setup we have is based on our staging server use-case, which can be used as an example for yours.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginx_1          | 2023/01/06 13:38:44 [emerg] 10#10: open() &quot;/etc/letsencrypt/options-ssl-nginx.conf&quot; failed (2: No such file or directory) in /etc/nginx/conf.d/app.conf:52</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nginxexporter_1  | time=&quot;2023-01-06T13:48:07Z&quot; level=error msg=&quot;Error scraping nginx: Error scraping nginx: Get http://nginx:80/stub_status: dial tcp: lookup nginx on 127.0.0.11:53: no such host&quot; source=&quot;nginx_exporter.go:171&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To mitigate this issue, you&#x27;ll have to run a script from the directory <code>docker/full-node</code> of the Ursa project.</p><p>Start by changing the directory to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ./docker/full-node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The command you&#x27;ll be running needs to be prefixed by a list of custom domain names</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DOMAINS=&quot;&lt;YOUR-CUSTOM-DOMAIN-NAME-1&gt; &lt;YOUR-CUSTOM-DOMAIN-NAME-2&gt;&quot; ./init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here&#x27;s a practical example,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DOMAINS=&quot;my-fleek-network-node.dev www.my-fleek-network-node.dev&quot; ./init-letsencrypt.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you haven&#x27;t set up the domain correctly, you&#x27;d get</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Certbot failed to authenticate some domains (authenticator: webroot). The Certificate Authority reported these problems:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Domain: my-fleek-network-node.dev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Type:   unauthorized</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Detail: 2001:4860:4802:32::15: Invalid response from https://www.foobar.dev/.well-known/acme-challenge/3UrSvBmgSNsymLKA20wGKJfxQq_utTKlsTLxltTGNQ4: 403</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Hint: The Certificate Authority failed to download the temporary challenge files created by Certbot. Ensure that the listed domains serve their content from the provided --webroot-path/-w and that files created there can be downloaded from the internet.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> 💡 We&#x27;ll provide a guide with instructions about how to set up the custom domains.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-ssl-for-testing">Disabling SSL for testing<a class="hash-link" href="#disabling-ssl-for-testing" title="Direct link to heading">​</a></h3><p>⚠️ A secure connection is mandatory, the following instructions are available for testing purposes only!</p><p>As many of you might not have a custom domain and are just looking around to see what Fleek Network is about, a way around would be to disable SSL for testing, which means that the communication is none secure.
To learn how to secure the Node, find our guide <a href="/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls">Securing a Node with SSL/TLS</a>.</p><p>Open and edit the file <code>docker/full-node/data/nginx/app.conf</code> and make the content the following:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">proxy_cache_path /cache keys_zone=nodecache:100m levels=1:2 inactive=31536000s max_size=10g use_temp_path=off;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen [::]:80;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name node.ursa.earth www.node.ursa.earth;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    location /stub_status {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      stub_status;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_redirect          off;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    client_max_body_size    10m;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    client_body_buffer_size 128k;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_connect_timeout   90;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_send_timeout      90;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_read_timeout      90;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_buffers           32 128k;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/vnd.ipld.raw;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/vnd.ipld.car;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header content-type  application/octet-stream;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header cache-control public,max-age=31536000,immutable;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache nodecache;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_valid 200 31536000s;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      add_header X-Proxy-Cache $upstream_cache_status;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_methods GET HEAD POST;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_cache_key &quot;$request_uri|$request_body&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      client_max_body_size 1G;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      proxy_pass http://ursa:4069;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Want to secure your node? We have a brief guide on <a href="/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls">Securing a Node with SSL/TLS</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h2><p>Containers are a way to have a self-contained environment that includes all necessary dependencies, libraries, software, etc, required to run an application 🍰.</p><p>Fleek Network&#x27;s Ursa is developed with <a href="https://www.rust-lang.org/" target="_blank" rel="noopener noreferrer">Rust</a>, a general-purpose programming language, that requires several dependencies and libraries to compile the project. Some of these libraries are not installed by default 🤖 and require some troubleshooting for the end user. <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a> provides us with containers, self-containing all the required libraries for the purpose of running Ursa, our application.</p><p>We guided you through the initial installation steps, and how to build a <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a> image, which then&#x27;s used to Docker run a container. Plus, provided lower-level commands, to help you understand other present or advanced use-cases, and also at higher level, offerring simple utility methods.</p><p>While we do our best to provide the clearest instructions, there&#x27;s always space for improvement, therefore feel free to make any contributions by messaging us on our <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">Discord</a> or by opening a <a href="https://github.com/fleek-network" target="_blank" rel="noopener noreferrer">PR</a> in any of our repositories 🙏.</p><p>Discover more about the project by <a href="https://github.com/fleek-network/ursa" target="_blank" rel="noopener noreferrer">watching/contributing on Github</a>, following us on <a href="https://twitter.com/fleek_net" target="_blank" rel="noopener noreferrer">Twitter</a>, and joining <a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer">our community Discord</a> for all the best updates!</p><section class="author_card"><div><span class="avatar"><a href="https://github.com/heldrida" target="_blank" alt="Helder Oliveira"><img src="https://github.com/heldrida.png" alt="Helder Oliveira"></a></span><div><span class="name"><a href="https://github.com/heldrida" target="_blank" alt="Helder Oliveira">Helder Oliveira</a></span><span class="title">Software Developer + DX</span><span class="discord">Got questions? Find us on <a href="https://discord.gg/fleekxyz" target="_blank">Discord!</a></span></div></div></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/dcdn">DCDN</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/guide">Guide</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/getting-started">Getting Started</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/fleek-network">Fleek Network</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/guides/tags/docker">Docker</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fleek-network/fleek-network-docs/edit/main/guides/Network nodes/fleek-network-running-a-node-in-a-docker-container.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-15T10:25:16.000Z">Feb 15, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/Network nodes/fleek-network-packing-content-addressed-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to deal with files using Content Addressable aRchives</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Securing a node with SSL/TLS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#for-the-impatient-" class="table-of-contents__link toc-highlight">For the impatient 😤</a></li><li><a href="#quick-video" class="table-of-contents__link toc-highlight">Quick Video</a></li><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#ursa-cli-source-code" class="table-of-contents__link toc-highlight">Ursa CLI source-code</a></li><li><a href="#install-docker-desktop" class="table-of-contents__link toc-highlight">Install Docker desktop</a></li><li><a href="#recommended-settings" class="table-of-contents__link toc-highlight">Recommended settings</a></li></ul></li><li><a href="#image" class="table-of-contents__link toc-highlight">Image</a><ul><li><a href="#build-the-docker-image" class="table-of-contents__link toc-highlight">Build the Docker image</a></li></ul></li><li><a href="#container" class="table-of-contents__link toc-highlight">Container</a><ul><li><a href="#run-the-container-from-the-official-nightly-image" class="table-of-contents__link toc-highlight">Run the container from the official nightly image</a></li><li><a href="#run-the-docker-container" class="table-of-contents__link toc-highlight">Run the Docker container</a></li><li><a href="#ursa-healthcheck" class="table-of-contents__link toc-highlight">Ursa healthcheck</a></li></ul></li><li><a href="#utility-commands" class="table-of-contents__link toc-highlight">Utility commands</a><ul><li><a href="#stop-the-docker-container" class="table-of-contents__link toc-highlight">Stop the Docker container</a></li><li><a href="#restart-the-docker-container" class="table-of-contents__link toc-highlight">Restart the Docker container</a></li><li><a href="#delete-the-docker-container" class="table-of-contents__link toc-highlight">Delete the Docker container</a></li><li><a href="#execute-ursa-cli-commands-in-the-container" class="table-of-contents__link toc-highlight">Execute Ursa CLI commands in the container</a></li><li><a href="#execute-bash-shell-in-the-container" class="table-of-contents__link toc-highlight">Execute bash shell in the container</a></li></ul></li><li><a href="#run-the-container-from-the-recommended-stack" class="table-of-contents__link toc-highlight">Run the container from the recommended stack</a><ul><li><a href="#running-a-stack-with-docker-compose" class="table-of-contents__link toc-highlight">Running a stack with Docker compose</a></li><li><a href="#disabling-ssl-for-testing" class="table-of-contents__link toc-highlight">Disabling SSL for testing</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="left" href="/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/blog">Engineering</a></li><li class="footer__item"><a class="footer__link-item" position="left" activebasepath="guides" href="/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" position="left" activebasepath="reference" href="/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fleek_net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://fleek.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/fleekxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fleek-network" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--left"><div class="margin-bottom--sm"><a href="https://fleek.network" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/logo+named.svg?202301101154" alt="Fleek Network" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160"><img src="/img/logo+named.svg?202301101154" alt="Fleek Network" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8a0983d7.js"></script>
<script src="/assets/js/main.f0e9a9e5.js"></script>
</body>
</html>